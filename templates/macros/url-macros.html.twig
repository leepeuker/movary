{#
    URL generation macros for Movary application
    Organized by category for better maintainability
#}

{# ========================================
   NAVIGATION & AUTH URLs
   ======================================== #}

{% macro baseUrl() %}
    {{- applicationUrl | default ('/') -}}
{% endmacro %}

{% macro baseUrlWith(path) %}
    {{- applicationUrl }}/{{ path -}}
{% endmacro %}

{% macro loginUrl() %}
    {{- applicationUrl }}/login
{% endmacro %}

{% macro createUserUrl() %}
    {{- applicationUrl }}/create-user
{% endmacro %}

{% macro canonicalUrl(canonicalPath, canonicalExtra) %}
    {{- applicationUrl }}{{ canonicalPath }}{{ canonicalExtra -}}
{% endmacro %}

{# ========================================
   ASSET URLs (CSS, JS, Images)
   ======================================== #}

{% macro cssUrl(filename) %}
    {{- applicationUrl }}/css/{{ filename -}}
{% endmacro %}

{% macro jsUrl(filename) %}
    {{- applicationUrl }}/js/{{ filename -}}
{% endmacro %}

{% macro jsComponentUrl(componentName) %}
    {{- _self.jsUrl('component/' ~ componentName) -}}
{% endmacro %}

{% macro imageUrl(filename) %}
    {{- applicationUrl }}/images/{{ filename -}}
{% endmacro %}

{# ========================================
   USER URLs
   ======================================== #}

{% macro userBaseUrl(username) %}
    {{- applicationUrl }}/users/{{ username -}}
{% endmacro %}

{% macro userPageUrl(username, page) %}
    {{- _self.userBaseUrl(username) }}/{{ page -}}
{% endmacro %}

{% macro userDashboardUrl(username) %}
    {{- _self.userPageUrl(username, 'dashboard') -}}
{% endmacro %}

{% macro userHistoryUrl(username) %}
    {{- _self.userPageUrl(username, 'history') -}}
{% endmacro %}

{% macro userWatchlistUrl(username) %}
    {{- _self.userPageUrl(username, 'watchlist') -}}
{% endmacro %}

{% macro userWatchlistWithQueryUrl(username, queryParams) %}
    {{- _self.userWatchlistUrl(username) }}?{{ queryParams -}}
{% endmacro %}

{% macro userPersonUrl(username, person) %}
    {{- _self.userPageUrl(username, 'persons/' ~ person.id ~ '-' ~ person.name|slugify) -}}
{% endmacro %}

{% macro userDirectorsUrl(username) %}
    {{- _self.userPageUrl(username, 'directors') -}}
{% endmacro %}

{% macro userDirectorsWithQueryUrl(username, queryParams) %}
    {{- _self.userDirectorsUrl(username) }}?{{ queryParams -}}
{% endmacro %}

{% macro userActorsUrl(username) %}
    {{- _self.userPageUrl(username, 'actors') -}}
{% endmacro %}

{% macro userActorsWithGenderUrl(username, genderCode) %}
    {{- _self.userActorsUrl(username) }}?ge={{ genderCode -}}
{% endmacro %}

{% macro userActorsWithGenderSortedByUniqueAppearances(username, genderCode) %}
    {{- _self.userActorsWithGenderUrl(username, genderCode) }}&sb=uniqueAppearances&so=desc
{% endmacro %}

{% macro userActorsWithQueryUrl(username, queryParams) %}
    {{- _self.userActorsUrl(username) }}?{{ queryParams -}}
{% endmacro %}

{% macro userMovieUrl(username, movie) %}
    {{- _self.userPageUrl(username, 'movies/' ~ movie.id ~ '-' ~ movie.title|slugify) -}}
{% endmacro %}

{% macro userMoviesUrl(username) %}
    {{- _self.userPageUrl(username, 'movies') -}}
{% endmacro %}

{% macro userMoviesWithLanguageUrl(username, languageCode) %}
    {{- _self.userMoviesUrl(username) }}?la={{ languageCode -}}
{% endmacro %}

{% macro userMoviesWithGenreUrl(username, genreName) %}
    {{- _self.userMoviesUrl(username) }}?ge={{ genreName -}}
{% endmacro %}

{% macro userMoviesWithProductionCountryUrl(username, countryCode) %}
    {{- _self.userMoviesUrl(username) }}?pc={{ countryCode -}}
{% endmacro %}

{% macro userMoviesWithReleaseYearUrl(username, releaseYear) %}
    {{- _self.userMoviesUrl(username) }}?ry={{ releaseYear -}}
{% endmacro %}

{% macro userMoviesWithLocationUrl(username, locationId) %}
    {{- _self.userMoviesUrl(username) }}?loc={{ locationId -}}
{% endmacro %}

{% macro userMoviesWithQueryUrl(username, queryParams) %}
    {{- _self.userMoviesUrl(username) }}?{{ queryParams -}}
{% endmacro %}

{% macro userHistoryWithQueryUrl(username, queryParams) %}
    {{- _self.userHistoryUrl(username) }}?{{ queryParams -}}
{% endmacro %}

{# ========================================
   SETTINGS URLs
   ======================================== #}

{% macro settingsUrl(section, page) %}
    {{- applicationUrl }}/settings/{{ section }}/{{ page -}}
{% endmacro %}

{% macro settingsAccountUrl(page) %}
    {{- _self.settingsUrl('account', page) -}}
{% endmacro %}

{% macro settingsServerUrl(page) %}
    {{- _self.settingsUrl('server', page) -}}
{% endmacro %}

{% macro settingsIntegrationUrl(integration) %}
    {{- applicationUrl }}/settings/integrations/{{ integration -}}
{% endmacro %}

{% macro settingsAppUrl() %}
    {{- applicationUrl }}/settings/app
{% endmacro %}

{% macro settingsAccountExportUrl(format, type) %}
    {{- applicationUrl }}/settings/account/export/{{ format }}/{{ type -}}
{% endmacro %}

{% macro settingsAccountImportUrl(format, type) %}
    {{- applicationUrl }}/settings/account/import/{{ format }}/{{ type -}}
{% endmacro %}

{% macro settingsAccountActionUrl(action) %}
    {{- applicationUrl }}/settings/account/{{ action -}}
{% endmacro %}

{% macro settingsLetterboxdExportUrl() %}
    {{- applicationUrl }}/settings/letterboxd-export
{% endmacro %}

{% macro settingsTraktUrl() %}
    {{- applicationUrl }}/settings/trakt
{% endmacro %}

{# ========================================
   JOB & ADMIN URLs
   ======================================== #}

{% macro jobScheduleUrl(jobType) %}
    {{- applicationUrl }}/jobs/schedule/{{ jobType -}}
{% endmacro %}

{% macro jobQueueUrl(action) %}
    {{- applicationUrl }}/job-queue/{{ action -}}
{% endmacro %}
